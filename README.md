# 对事件溯源模式(event-sourcing)事件的思考及其在myddd-vertx的实现（示例篇）

## 1.这个项目是什么

这是一个示例项目，它是我近期对事件源模式(event-sourcing)的思考，以及将其应用在myddd-vertx中的一个示例程序

## 2. 事件溯源模式(event-sourcing)简要介绍

在这篇文章中，我仅简单的对event souring做概念性的介绍。

### 2.1 CURD模式

在理解什么是事件溯源模式之前，我们需要理解我们大部分项目的一个常规做法。

对于绝大多数系统的实现，都可以纳入CURD模式中，也就是对数据的增删改查式维护。举例说明：我们有一个系统，记录了**雇员**的概念，那我们会在数据库（无论是关系型或是非关系型等各种数据存储）中存储关于雇员的信息，我们的系统会新增雇员，修改雇员信息，删除雇员以及查询雇员等功能，这个过程中，最关键的是：

***系统记录的只是信息最新的状态，无法溯源信息的变更历史***

也就是，系统可以知道一个雇员的最新的状态，它手机号是多少，邮箱是多少，或任职什么部门等，因为这些信息是在数据中存储到了。但系统无法知道这个雇员信息的演进历史，它究竟是什么时候创建的数据，什么时候做出过何种修改。

当然，有些系统会有类似的**日志审计**的概念，可以查询类似的变更历史。

但这和**event-sourcing**模式有根本的不同。

### 2.2 事件溯源模式

与常规的模式不同，在事件溯源模式中，关注的是变更历史，也就是**事件（Event）**，而数据的**状态**属于从属地位。所谓从属地位是指：

***状态是由事件推算及演变而来***

系统记录的关键信息是一个个事件，基于这些事件可以演算或推导出相关的状态信息。

比如财务中的帐户余额，它就非常适合event-sourcing。关键是记录帐户进出的各种事件，如存钱，取钱，借钱等，通过这些事件能够计算出帐户余额。

不仅是当前的余额，任意一个时间点的余额都能计算出来。

这就是event sourcing的模式适应的场景。

通常在大多数情况下，event souring会和CQRS搭配起来一起使用。关于CQRS不在本文讨论之列。

## 3. 本项目设计的场景









